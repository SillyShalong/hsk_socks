TODO:
1. deal with nonblock connect()